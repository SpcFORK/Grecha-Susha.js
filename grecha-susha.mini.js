class Grecha{static preloaded=[];static loaded=[];constructor(window){let g_=this;class ElementWrapper{static LOREM="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.";static _lorem_=void(window.LOREM=ElementWrapper.LOREM);static RouterSymbol=Symbol.for("grecha-router");static CoreSymbol=Symbol.for("grecha-core");static modulesSymbol=Symbol.for("grecha-modules");get innerHTML(){return this.element.innerHTML}get outerHTML(){return this.element.outerHTML}constructor(e,...t){this.element="string"==typeof e?document.createElement(e):e;e=this.methods();if(Object.assign(this,e),Object.assign(this.element,e),this.element.parentElement&&(this._outerHTML_=()=>this.element.outerHTML),t)for(const r of t)"string"==typeof r?this.element.appendChild(document.createTextNode(r)):r instanceof ElementWrapper?this.element.appendChild(r.element):this.element.appendChild(r)}methods(){let r=this;return{element:this?.element||this,__LOREM__(){return ElementWrapper.LOREM},get LOREM(){return this.__LOREM__()},att$(e,t){return Array.isArray(t)&&(t=t.join(" ")),r.element.setAttribute(e,t),r},onclick$(e){return r.element.onclick=e,r},get$(){return r.element},wrapper$(){return r},wrap$(t){let e=r.element.querySelector('[data-grecha="wrap$'+t+'"]');if(e)return console.log(e),r.element.innerHTML=e.innerHTML,e.innerHTML="",e?.remove?.(),r.element;{let e=new ElementWrapper(t);return t&&t instanceof HTMLElement&&e._changeElement(t),e.att$("data-grecha","wrap$"+t),e.element.innerHTML=r.element.innerHTML,r.element.innerHTML="",r.element.appendChild(e.element),r.element}},bold$(){return r.wrap$("b")},italic$(){return r.wrap$("i")},underline$(){return r.wrap$("u")},strike$(){return r.wrap$("s")},link$(e,t){let r=this.wrap$("a");if(r&&(e||t))return r.firstChild.att$("href",e),r.firstChild.att$("target","_blank"),r.firstChild.att$("rel","noopener noreferrer"),r.firstChild.att$("title",t),r},absolutePos$(e,t){r.element.style.position="absolute",r.element.style.display="flex",r.element.style.flexWrap="wrap",r.element.style.left=e,r.element.style.top=t},resetPos$(){r.element.style.position="static",r.element.style.display="block",r.element.style.flexWrap="nowrap",r.element.style.left="",r.element.style.top=""},data$(e,t){return r.att$("data-"+e,t),r},append$(e){return e instanceof ElementWrapper?r.element.appendChild(e.element):e instanceof HTMLElement?r.element.appendChild(e):"string"==typeof e&&r.element.appendChild(document.createTextNode(e)),r},id$(e){return r.att$("id",e),r},class$(...e){return r.element.classList.add(...e),r},style$(e){for(const t in e)r.element.style[t]=e[t];return r},toggleClass$(e){return r.element.classList.toggle(e),r},html$(e){return r.element.innerHTML=e,r},text$(e){return r.element.textContent=e,r},placeholder$(e){return r.att$("placeholder",e),r},type$(e){return r.att$("type",e),r},on$(e,t){return r.element.addEventListener(e,t),r},off$(e,t){return r.element.removeEventListener(e,t),r},onEnter$(t){return r.on$("keydown",e=>{"Enter"===e.key&&t(e)}),r},focus$(){return r.element.focus(),r},blur$(){return r.element.blur(),r},aria$(e,t){return r.att$("aria-"+e,t),r},appendChildren$(...e){return e.forEach(e=>{r.append$(e)}),r},disabled$(e){return e?r.att$("disabled","true"):r.element.removeAttribute("disabled"),r},createElement$(e,...t){return r.append$(new ElementWrapper(e,...t)),r},fetchContent$(e,t){return fetch(e).then(e=>e.json()).then(e=>t(r,e)).catch(e=>console.error("Error:",e)),r},stylesheet$(){if(r?._stylesheet)return r._stylesheet;var e=new ElementWrapper(document.createElement("style"));this.append$(e)},bounds$(){return r.element.getBoundingClientRect()},str$(){return r.element?.outerHTML||r.element?.innerHTML}}}_changeElement(e){return this.element=e,this._applyMethods(),this}_applyMethods(){Object.assign(this.element,this.methods)}}function tag(e,...t){return new ElementWrapper(e,...t).get$()}function depadString(e="",t=0){var r;return t<0?(r=-t,e.split("\n").map(e=>" ".repeat(r)+e).join("\n")):(t<1&&(t=e.match(/^\s*/)[0].length),e.split("\n").map(e=>e.slice(t)).join("\n"))}const MUNDANE_TAGS=["canvas","h1","h2","h3","main","section","article","aside","footer","header","p","a","br","hr","b","i","u","s","sub","sup","mark","small","big","strong","em","ins","del","q","blockquote","pre","code","kbd","samp","var","abbr","address","cite","dfn","map","area","wbr","ul","ol","li","div","span","html","head","body"];for(const tagName of MUNDANE_TAGS)window[tagName]=(...e)=>tag(tagName,...e);async function hydrate(){var e=document.querySelectorAll("[href]"),t=document.querySelectorAll("[url]"),r=document.querySelectorAll("[src]");let c=window.location.origin,n=window.location.pathname;n.split("/").length;var a=Object.entries({href:e,url:t,src:r});for(let e=0;e<a.length;e++){var o=a[e],i=o[0],s=o[1];for(let e=0;e<s.length;e++){let r=s[e],l=r.getAttribute("href");if("A"==r.tagName){let s=l.split("/"),e=l;(s[0]+"").includes(":")&&s[1]+""==""||(e=c+"/"+l);let t=new URL(e);if(t.hash.startsWith("#/")||l.startsWith("#"))continue;r.addEventListener("click",async e=>{e.preventDefault(),e.stopImmediatePropagation();let t=__Grecha__.loaded[l];console.log(__Grecha__.loaded),t||(HTMLRoot.innerHTML=SushaTemplates.loadinglinks.innerHTML,t=await fetch(l).then(e=>e.text())),t=t.replace(/(href|src|url)="(?:\.\/)?(.*?)"/g,(e,t,r)=>{if(r.startsWith("../")){var n=(r.match(/\.\.\//g)||[]).length;let e=s.slice(0,s.length-n);r=(r=r.replace(/^(\.\.\/)/,c+"/")).replace(/\.\.\//g,"");n=e.join("/");return t+`="${n?n+"/":""}${r}"`}return`${t}="${c}/${l}/${r}"`}),document.write(t??""),window.scrollTo(0,0);var n=document.querySelectorAll("script");for(let e=0;e<n.length;e++){let r=n[e];var a=r.getAttribute("src");if(a){let e=await fetch(a);a=await e.text();let t=document.createElement("script");for(let e=0;e<r.attributes.length;e++){var o=r.attributes[e];t.setAttribute(o.name,o.value)}r.remove(),t.innerHTML=a,document.body.appendChild(t)}else if(r.text){let t=document.createElement("script");for(let e=0;e<r.attributes.length;e++){var i=r.attributes[e];t.setAttribute(i.name,i.value)}document.body.appendChild(t)}}e=new Event("DOMContentLoaded");window.dispatchEvent(e)})}let t={tag:r,attribute:i,value:r.getAttribute(i)};Grecha.preloaded.find(e=>e.value==t.value)||Grecha.preloaded.push(t)}}Grecha.preloaded.length<1?console.info("[GS Optimizer] No elements found to preload."):await new Promise(async(e,t)=>{for(let t=0;t<Grecha.preloaded.length;t++){var n=Grecha.preloaded[t];let r=n.value;var a=r.split("/");(a[0]+"").includes(":")&&a[1]+""==""||(r=c+"/"+r);let e=new URL(r);a=e.pathname.split(".");if(1<a.length){a=a[a.length-1];if("html"!==a)continue}if(!e.hash.startsWith("#/")&&!e.pathname.startsWith("/data:")){let e=await fetch(r);a=await e.text();let t={tag:n,attribute:n.attribute,value:a};Grecha.preloaded.find(e=>e.value==t.value)||Grecha.preloaded.push(t)}}})}const windowMethods={HTMLRoot:document.body.parentElement,SushaWrapper:ElementWrapper,tag:tag,htmlDoc(...e){return tag("",...e)},Serializer:class{constructor(e){e=e||document,this.doc=e}serialize(e){const t=new XMLSerializer;return t.serializeToString(e)}static Code={serializeState(e){return JSON.stringify(e)},deserializeState(e){return JSON.parse(e)},ValueSerializer:class ValueSerializer{static SOs=[];constructor(){this.container=this._initializeContainer(),this.SOs.push(this.container)}_initializeContainer(){const e=document.createElement("div");return e.style.display="none",e.id="serial-object-container",document.body.appendChild(e),e}createSerialObject(e){const t=new SerialObject(e);return t.serialize(this.container),t}getSerialObject(e){var t=this.container.querySelector(`[data-serial="${e}"]`);return t?(t=deserializeState(t.textContent),new SerialObject({[e]:t.state})):null}saveState(){var e=this.container.children,e=Array.from(e).map(e=>({id:e.dataset.serial,state:e.textContent}));return JSON.stringify(e)}loadState(e){const t=JSON.parse(e);t.forEach(e=>{const t=document.createElement("span");t.dataset.serial=e.id,t.textContent=e.state,this.container.appendChild(t)})}},SerialObject:class SerialObject{constructor(e){this.serial=this._initializeSerialProxy(e)}_initializeSerialProxy(e){var t,r;const n=new Proxy({},{get:(e,t)=>e[t]?e[t].state:void 0,set:(e,t,r)=>(e[t]={type:typeof r,state:r},!0),deleteProperty:(e,t)=>delete e[t]});for([t,r]of Object.entries(e))n[t]=r;return n}serialize(e){const t=document.createElement("span");t.dataset.serial=this.getId(),t.textContent=serializeState({state:this.serial}),e.appendChild(t)}getId(){return Object.keys(this.serial).join("_")}deserialize(e){e=deserializeState(e.textContent);Object.assign(this.serial,e.state)}}}},Shout:{total:{},createShout(t="",e=function(){}){let r=0,n=0;Shout.total[t]={count:r},Object.defineProperty(window,t,{get:function(){return r++,Shout.total?.[t]&&Object.assign(Shout.total[t],{count:r}),e(r)},set:function(e){Object.assign(Shout.total[t],{["string"==typeof e?e:e.name||n+"_"+typeof e]:e}),n++},enumerable:!0,configurable:!0})},destroyShout(t){if(!this.total.includes(t))throw new Error(`Shout ${t} not found`);delete window[t],this.total=this.total.filter(e=>e!==t)},isShout(e){return!(!this.total.includes(e)||!1===window[e][Symbol.for("shout")].is)}},img(e,t){return tag("img").att$("src",e).att$("alt",t||e)},input(e){return tag("input").type$(e)},button(e){return tag("button").att$("text",e)},select(...e){let t=tag("select");for(const r of e)t.appendChild(tag("option").att$("value",r));return t},router(t){const e=div().wrapper$(),r=e.get$(),n=ElementWrapper.RouterSymbol,a=ElementWrapper.CoreSymbol;window[n]=e;window[a]={WindowState:{current:null,history:[],stack:[]}};for(const h in t)t[h].state={id:0};let o={url(){return new URL(window.location)},hashLocation(e){return(e??this.url()).hash.slice(1)||"/"}};o.url();var i,s=o.hashLocation();const l={value:s},c=(t[l.value]||(l.value="#/"),()=>t[l.value]?.state||{});let d={get __handler__(){return window[n]},syncHash(){c().id=0,i=o.url();var e="/404";return(s=o.hashLocation(i))in t||(console.assert(e in t,'Route "/404" not found among the routes.'),s=e),r.replaceChildren(t[s](r)),l.value=s,window[a]?.syncHash?.(s),hydrate(),r},destroyGrechaSync(){window.removeEventListener("hashchange",d.syncHash)},deleteGrecha(){delete window[g_];for(const e in d)delete window[e];delete window[n]},useState(e=0){const t=c().id++;return c()[t]=c()[t]??e,[()=>c()[t],e=>{c()[t]=e,r.refresh()}]}};return window.addEventListener("hashchange",d.syncHash),Object.assign(r,d),r.refresh=r.syncHash,d.syncHash(),r},qCanvas(e,...t){const r=tag("canvas");var n,a,e=r.getContext(e||"2d");for([n,a]of t.entries())"string"==typeof a?r.setAttribute(a,t[n+1]):"function"==typeof a?r.addEventListener(a.name,a):"object"==typeof a&&Object.assign(r,a);return{canvas:r,ctx:e}},qImage(e){return{image:img(e)}},__spreadArray:this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},tabSwitcher(e,r){return div(...e.map((e,t)=>span(a(p(e).att$("href","#").onclick$(()=>r(t)))).att$("class","tab"))).att$("class","tab-switcher")},tabs(e){var t=Object.keys(e);const r=Object.values(e);let n=0;const a=div(r[n]);return div(tabSwitcher(t,e=>{a.replaceChildren(r[n]),a.appendChild(r[e]),n=e}))},webgl(e,t){e=this.qCanvas("webgl",["width",e??112],["height",t??112],["class","preview-canvas"]);if(null===e.ctx)throw new MediaError("Unable to initialize WebGL. Your browser or machine may not support it.");return e},distance(e,t){var r;if(e?.element||t?.element)return e=e.element.bounds$(),t=t.element.bounds$(),r=Math.abs(e.x+e.width/2-t.x-t.width/2),e=Math.abs(e.y+e.height/2-t.y-t.height/2),Math.sqrt(r*r+e*e)},animate(e,t){const r=Symbol.for("ShouldLoop");e[r]=!0;let n;const a=()=>{e[r]&&(t(()=>{e[r]=!0,e[r]&&(n=requestAnimationFrame(a))}),n=requestAnimationFrame(a))};return a(),()=>{e[r]=!1,cancelAnimationFrame(n)}},scrollTo(e,t=""){if(["link","go"].includes(e)){e=()=>window.scrollTo({top:0,behavior:"smooth"});if(t){const r=document.querySelector(t);r?r.scrollIntoView({behavior:"smooth",block:"start"}):e()}else e()}},depadString:depadString,nodesToString(...e){return e.map(e=>e.outerHTML).join("")},createDocument(...e){return(new DOMParser).parseFromString(e,"text/html")},AuthorHeaders:{AuthorHeader(prefs,cb){prefs=prefs||{},cb=cb||function(){},prefs.location=prefs.location||"./script.js";var checkEnvironment=()=>{let isImportSupported=!1;try{eval("import.meta"),isImportSupported=!0}catch{}return isImportSupported?"ES Module":"undefined"!=typeof module&&module?.exports&&void 0===window?"Node":void 0!==window&&void 0!==window?.document?"Browser":"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?"Web Worker":"Unknown"};let _env_=checkEnvironment();async function node_getFile(){let e=globalThis?.fs?globalThis.fs:globalThis?.require?.resolve?.("fs");if(e)return e.readFileSync(prefs.location,"utf8")}async function node_getFile_async(){let e=globalThis?.fs?globalThis.fs:globalThis?.require?.resolve?.("fs");if(e)return e.promises.readFile(prefs.location,"utf8")}async function browser_getFile(){prefs.location.startsWith("./")&&(prefs.location=prefs.location.slice(2),prefs.location=window.location.toString()+prefs.location);var e=new URL(prefs.location);let t=await fetch(e);return await t.text()}function esm_getFile(){var e=globalThis?.import?.meta?.url;if(e)return e}async function fetchSRC(){switch(_env_){case"ES Module":return esm_getFile();case"Node":return node_getFile();case"Browser":return browser_getFile();case"Web Worker":return node_getFile_async();case"Unknown":return node_getFile();default:return browser_getFile()}}async function getFile(){var e=await fetchSRC();return e||""}async function formatExpectation(){var r={},e=prefs?.code||await getFile();if(prefs.src=e,!prefs)return r;let t=/^\/[*/] *([^\s]*?[\W]){3} *authorheader *\1{3} *(?:\*\/)*([^]+)\/[*/] *\1{3} *\1{3} *(?:\*\/)*/gim.exec(prefs.src)?.[2];if(!t)return r;let n=function(e){let t=e.match(/^\/\/ *([^\n]*?) *(?:\n|$)/gim),r=[];return t.forEach(e=>{let t=e.replace(/\n/g,"");t.startsWith("/")&&(t.startsWith("//")?t=t.replace(/\//g,""):t.startsWith("/*")&&(t=t.replace(/\*/g,""))),r.push(t)}),r}(t.trim());return n.forEach(t=>{if("string"!=typeof t)return r;{let e=t.trim();if(e.startsWith("@"))t=(t=e).slice(1),r?.atData?r.atData.push(t):r.atData=[t];else if(e.startsWith("$")){t=e;if((t=t.slice(1)).includes(":")){let e=t.split(":");e[0]=e[0].trim(),e[1]=e[1].trim(),e={[e[0]]:e[1]},r?.metaData?r.metaData.push(e):r.metaData=[e]}else r?.meta?r.meta.push(t):r.meta=[t]}else e.startsWith("--")&&e.endsWith("--")&&(t=(t=(t=e).slice(2)).slice(0,-2).trim(),r?.path?r.path.push(t):r.path=[t])}}),r}async function compile(){var e=await formatExpectation();if(e)return e}let _returns_={compile:compile,getFile:getFile,formatExpectation:formatExpectation,prefs:prefs};return cb(_returns_),_returns_}},SushaTemplates:{get ExampleDocument(){return html(head(tag("title","Example Document")),body(main(article(section(h1("Hello World!").att$("class","title"),small("From Susha.").att$("class","subtitle"),hr(),br(),p("This is a template.").att$("class","content"),p("It is <strong>very</strong> <em>simple</em>.").att$("class","content"),p("Susha allows you to create templates much like React.").att$("class","content"),p("(But is waaaay better!!)").att$("class","content"))).att$("class","main"))))},get loadinglinks(){return html(head(tag("title","Loading Links"),tag("style",`
                body, main {
                  display: flex;
                  flex-direction: column;
                  justify-content: center;
                  align-items: center;
                  background: #030;
                  color: #afa;
                  font-family: monospace;
                  transition: all .5s;
                }

                hr {
                  width: 80%;
                  border: 1px solid #afa5;
                }

                main article {
                  display: flex;
                  flex-direction: column;
                  justify-content: center;
                  align-items: center;
                }

                main article section {
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                }

                main article section h1 {
                  font-size: 2rem;
                }

                main article section p {
                  font-size: 1rem;
                }
              `)),body(main(article(section(h1("Loading Links"),p("The link you requested is loading..."),br(),p("If you are seeing this, it is because the link is not responding."),br(),hr(),br(),div(b(`SpcFORK - Grecha-Susha.js | ${(new Date).toLocaleString()} - Loading Links`)))))))}},typing:{TypedObject:class TypedObject{constructor(e){return e=e||{},TypedObject.typeEntries(this,e),this}static typeEntries(r,e){Object.entries(e).forEach(([e,t])=>{r[e]=typeof t})}static set(e,t){return Object.assign(e,t)}},TypeProxy:class TypeProxy{static collection=[];static holderSymbol=Symbol.for("meta");static coreSymbol=Symbol.for("core");static add(e){TypeProxy.collection.push(e),this[TypeProxy.holderSymbol].length<1?this[TypeProxy.holderSymbol]=[e]:this[TypeProxy.holderSymbol].push(e)}constructor(e){e=e||{},this[TypeProxy.coreSymbol]={},this._OBJECT_={[TypeProxy.coreSymbol]:createTypedObject("TypedStorage",{check:e=>typeof e===this[TypeProxy.coreSymbol],get:e=>this[TypeProxy.coreSymbol][e],set:(e,t)=>{if(this[TypeProxy.coreSymbol][e]&&typeof this[TypeProxy.coreSymbol][e]!=typeof t)throw new TypeError(`Expected type ${typeof t} for key ${e} but got `+typeof this[TypeProxy.coreSymbol][e]);return this[TypeProxy.coreSymbol][e]=t}})};let n=this._OBJECT_.typed=new this._OBJECT_[TypeProxy.coreSymbol](e);return new Proxy(this._OBJECT_.typed,{get:(e,t)=>n.check(t)?n.get(t):e[t],set:(e,t,r)=>{if(!n.check(t))throw new TypeError(`Expected type ${typeof r} for key ${t} but got `+typeof n.get(t));n.set(t,r)}})}},createTypedObject(e="",t){return{[e]:class extends TypedObject{constructor(e){super(e),TypedObject.set(this,t)}}}[e]}},SushaServiceBuilder:{get ServiceWorker(){return navigator?.serviceWorker||!1},get cacheBuilder(){return class{constructor(e,t){if(this.name=e,this.files=t||[],this._runner(),t)for(const r of t)this.add(r)}async _runner(){var e=await this.init();return this.cache=e}async _beforeHandler(){function t(){var t;t=this.name,caches.keys().then(e=>Promise.all(e.map(e=>{if(e!==t)return console.log("Service Worker: Clearing Old Cache"),caches.delete(e)})))}return this.cache||await this._runner(),self.addEventListener("activate",e=>{console.log("Service Worker: Activated  ",e),e.waitUntil(t())}),self.addEventListener("fetch",e=>{console.log("Service Worker: Fetching"),e.respondWith(async function(t){try{const e=await fetch(t.request),r=e.clone();return caches.open(cacheName).then(e=>{e.put(t.request,r)}),e}catch(e){return await caches.match(t.request)}}(e))}),this.cache}async init(e=()=>{}){const t=caches.open(this.name);return t.catch(e),t}async add(...e){let t=await this._SbeforeHandler();if(!t)throw new Error("ADD: No cache found...?");const r=e.map(e=>"string"==typeof e?new URL(e,location.href):e);self.addEventListener("install",e=>{e.waitUntil(t.addAll(r).catch(e=>{console.error(e)}).then(()=>(console.log("Service Worker Cache Updated"),self.skipWaiting())).catch(e=>{console.error(e)}))})}}},_EstWorker(e){let t=SushaServiceBuilder.ServiceWorker;if(t)return t.register(e);throw new Error("Unable to register service worker. Your browser or machine may not support it.")},buildCache(e){},buildWorker(e,t,r){return SushaServiceBuilder._EstWorker(e).then(()=>{t&&t()}).catch(e=>{r&&r(e)})}},SushaWorker:{get Worker(){return window?.Worker||!1},createWorker(e,t,r={}){if(onmessage=onmessage||(e=>{e.data instanceof Object&&Object.hasOwn(e.data,"queryMethod")&&Object.hasOwn(e.data,"queryMethodArguments")?(r?.queryableFunctions||queryableFunctions)[e.data.queryMethod].apply(self,e.data.queryMethodArguments):r?.default?.(e.data)}),!SushaWorker.Worker)throw new Error("Workers are not supported in this environment.");e=new Worker(e,t);return Object.assign(e,r),e},get SharedWorker(){return window?.SharedWorker||!1},createSharedWorker(e,t,r={}){if(!SushaWorker.SharedWorker)throw new Error("SharedWorkers are not supported in this environment.");const n=new SharedWorker(e,t);return Object.assign(n,r),n.port.onmessage=function(e){"result"===e.data?.type&&console.log("Received message from shared worker:",e.data)},n.port.start(),{...n,sendQuery(e,...t){if(!e)throw new TypeError("sendQuery requires at least one argument for the query method.");n.port.postMessage({queryMethod:e,queryMethodArguments:t})}}},queryableWorker(){return class{constructor(e,t=()=>{},r){this.worker=new Worker(e),this.listeners={},this.defaultListener=t,r&&(this.worker.onerror=r),this.worker.onmessage=e=>{e.data instanceof Object&&e.data.queryMethodListener&&this.listeners[e.data.queryMethodListener]?this.listeners[e.data.queryMethodListener].apply(this,e.data.queryMethodArguments):this.defaultListener(e.data)}}postMessage(e){this.worker.postMessage(e)}terminate(){this.worker.terminate()}addListener(e,t){this.listeners[e]=t}removeListener(e){delete this.listeners[e]}sendQuery(e,...t){if(!e)throw new TypeError("QueryableWorker.sendQuery takes at least one argument");this.worker.postMessage({queryMethod:e,queryMethodArguments:t})}}},replyQuery(e,...t){if(!e)throw new TypeError("reply - takes at least one argument");postMessage({queryMethodListener:e,queryMethodArguments:t})},emulateMessage(e){try{return JSON.parse(JSON.stringify(e))}catch(e){console.error("Failed to emulate message:",e)}}},DCSS:{getAllCSS(){return[...document.styleSheets].map(t=>{try{return[...t.cssRules].map(e=>e.cssText).join("")}catch(e){console.log("Access to stylesheet %s is denied. Ignoring…",t.href)}}).filter(Boolean).join("\n")},getCSSObjects(){return[...document.styleSheets]},findCSSRule(r){return[...document.styleSheets].map(t=>{try{return[...t.cssRules].find(e=>e.selectorText===r)}catch(e){console.log("Access to stylesheet %s is denied. Ignoring...",t.href)}}).filter(Boolean)},async importBatch(...e){e=e.map(e=>{const r=document.createElement("link");return r.rel="stylesheet",r.href=e,document.head.appendChild(r),new Promise((e,t)=>{r.onload=e,r.onerror=t})});try{await Promise.all(e)}catch(e){console.error("Error importing CSS batch:",e)}}},sushaTransport:class SushaTransport{constructor(e){if(!("WebTransport"in window))throw new Error("WebTransport API is not supported in this browser.");this.transport=new WebTransport(e)}async connect(){await this.transport.ready,console.log("WebTransport connection established!")}async sendData(e){const t=await this.transport.createUnidirectionalStream(),r=t.getWriter(),n=new TextEncoder;e=n.encode(e);await r.write(e),await r.close(),console.log("Data sent over WebTransport.")}async writeData(e){const t=e.getWriter();var e=new Uint8Array([65,66,67]),r=new Uint8Array([68,69,70]);t.write(e),t.write(r)}async readData(e){const t=e.getReader();for(;;){var{value:r,done:n}=await t.read();if(n)break;console.log(r)}}async receiveData(){const e=this.stream.readable.getReader(),t=new TextDecoder;try{for(;;){var{value:r,done:n}=await e.read();if(n){e.releaseLock();break}console.log(t.decode(r))}}catch(e){console.error("Error while reading data:",e)}}async closeConnection(){await writer.close(),await transport.close();try{await transport.closed,console.log(`The HTTP/3 connection to ${url} closed gracefully.`)}catch(e){console.error(`The HTTP/3 connection to ${url} closed due to ${e}.`)}console.log("WebTransport connection closed.")}async receiveUnidirectional(){const e=transport.incomingUnidirectionalStreams.getReader();try{for(;;){const{value:n,done:a}=await e.read();if(a)return void e.releaseLock();const o=n.readable.getReader();try{for(;;){var{value:t,done:r}=await o.read();if(r)break;console.log((new TextDecoder).decode(t))}}finally{o.releaseLock()}}}finally{e.releaseLock()}}async setUpBidirectional(){try{const{writable:n,readable:a}=await transport.createBidirectionalStream(),o=n.getWriter(),i=new TextEncoder;var e=i.encode("data to send");await o.write(e),await o.close();const s=a.getReader();for(;;){var{value:t,done:r}=await s.read();if(r)break;console.log((new TextDecoder).decode(t))}}catch(e){console.error("Error setting up bidirectional stream:",e)}}async receiveBidirectional(){const e=transport.incomingBidirectionalStreams,t=e.getReader();try{for(;;){var{done:r,value:n}=await t.read();if(r){t.releaseLock();break}var[a,o]=[n.readable,n.writable];await Promise.all([this.readData(a),this.writeData(o)])}}catch(e){console.error("Error during bidirectional stream handling:",e)}}},SushaXML:{get xmlRequest(){return class extends XMLHttpRequest{constructor(e,t,r={}){super(e,t),this.cbs=Object.assign(this._evlB,r),this.url=e,this.options=t;for(const n in this.cbs)this.addEventListener(n,this.cbs[n])}get handleEvent(){return function(e){log.textContent=""+log.textContent+e.type+`: ${e.loaded} bytes transferred
`}}get _evlB(){return{loadstart:this.handleEvent,load:this.handleEvent,loadend:this.handleEvent,progress:this.handleEvent,error:this.handleEvent,abort:this.handleEvent}}}}},SushaImporter:class SushaImporter{constructor(...e){this.urls=e,this.xmls=[]}start(n){return n=n||(window[Symbol.for("GSImporter")]?window[Symbol.for("GSImporter")].start:()=>{}),this.urls.forEach(e=>{let r=new SushaXML.xmlRequest(e);r.onload=(...t)=>{this.xmls.push(r.responseXML),n(e,...t);t=[e,...t][0];if((""+t).endsWith(".js")){let e=document.createElement("script");e.src=t,document.head.appendChild(e)}else if((""+t).endsWith(".css")){let e=document.createElement("link");e.rel="stylesheet",e.href=t,document.head.appendChild(e)}else(""+t).endsWith(".json")?fetch(t).then(e=>e.json()).then(e=>{window[Symbol.for("ImportedData")]=[...window[Symbol.for("ImportedData")]?window[Symbol.for("ImportedData")]:[],e]}):(""+t).endsWith(".html")?fetch(t).then(e=>e.text()).then(e=>{window[Symbol.for("ImportedHTML")]=[...window[Symbol.for("ImportedHTML")]?window[Symbol.for("ImportedHTML")]:[],e]}):(""+t).endsWith(".png")&&fetch(t).then(e=>e.blob()).then(e=>{let t=new Image;t.src=URL.createObjectURL(e),t.onload=()=>{window[Symbol.for("ImportedImages")]=[...window[Symbol.for("ImportedImages")]?window[Symbol.for("ImportedImages")]:[],t]}})},r.send()}),this}get xml(){return this.xmls}async awaitAll(){return Promise.all(this.xmls)}},SushaMath:{sineWave(e,t){for(var r=0,n=2*Math.PI/t,a=0;a<=1;a+=1/e){Math.sin(r);r+=n}}},CICOIconBuilder:function(){function t(e,t=10,r){var n={w:"white",0:"black"," ":"transparent",".":"transparent",r:"red",g:"green",b:"blue",c:"cyan",y:"yellow",m:"magenta",i:"indigo",v:"violet",o:"orange",p:"pink",k:"gray",a:"brown",e:"lime",s:"silver",z:"gold",t:"turquoise",l:"limegreen",n:"navy",u:"purple",d:"darkred",f:"darkgreen",j:"darkblue",x:"darkcyan",q:"darkyellow"},a=e.split("\n");let o=r||document.createElement("canvas"),i=o.getContext("2d");var s=t;o.width=a[0].length*s,o.height=a.length*s;for(let t=0;t<a.length;t++)for(let e=0;e<a[t].length;e++){var l=n[a[t][e]]||"red";i.fillStyle=l,i.fillRect(e*s,t*s,s,s)}return o}return customElements.get("spc-icon")||window.customElements.define("spc-icon",class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.load=this.load.bind(this),this.proc=this.proc.bind(this),this.shadowRoot.innerHTML=`
                <style>
                  :host {
                    display: inline-block;
                    position: relative;
                    width: min-content;
                    height: min-content;
                  }
                  .icon {
                    position: absolute;
                    top: 0;
                    left: 0;
                    display: flex;
                    flex-wrap: wrap;
                  }
                </style>
                <slot></slot>
              `,window.addEventListener("DOMContentLoaded",()=>{this.load(this.shadowRoot.host)})}load(e){if(this.hasAttribute("src")){if(this.src=this.getAttribute("src")||"",this.src.endsWith(".cico"))return void fetch(this.src).then(e=>e.text()).then(e=>{this.shadowRoot.innerHTML=`
                        <slot></slot>
                      `.trim(),this.can=this.appendChild(t(e)),this.proc(this.can)});throw new Error(`
        Invalid .cico URL: ${this.src} !!!
        Pleace add a .cico extension to the URL!!

        tank yu!
        `.trim())}this.can=this.appendChild(t(this.getAttribute("art")||this.innerHTML||`
        000
        0 0
          0 
         0 
         0 

         0 
        `.trim())),this.proc(this.can)}proc(e){e.style.width=e.width+"px",e.style.height=e.height+"px",e.style.display="block",e.classList.add("icon"),setInterval(()=>{requestAnimationFrame(()=>{if(this?.update?.(this.can),this.src){this.can.src=this.src;let e=Reflect.get(window,this.src);e&&e?.update?.(this)}})},1e3/60)}redraw(e){this.can instanceof HTMLCanvasElement&&this.can.replaceWith(t(e,10,this.can))}}),{drawPixelArt:t,canvasToDataURI:function(e){return e.toDataURL("image/png")}}}()};function windowOptimizer(){document.head||(console.error("[GS Optimizer] Head not found, Creating..."),document.head=document.createElement("head"),document.documentElement.appendChild(document.head));let e=document.head.querySelectorAll("meta"),t=[tag("meta").att$("charset","utf-8"),tag("meta").att$("name","viewport").att$("content","width=device-width, initial-scale=1.0"),tag("meta").att$("name","description").att$("content","A Grecha-Susha website."),tag("meta").att$("name","theme-color").att$("content","#ff0000"),tag("meta").att$("name","og:title").att$("content","Grecha-Susha"),tag("meta").att$("http-equiv","X-UA-Compatible").att$("content","IE=edge"),tag("meta").att$("name","og:description").att$("content","A Grecha-Susha website."),tag("meta").att$("name","og:image").att$("content","https://grecha-susha.github.io/assets/images/logo.png"),tag("meta").att$("name","og:url").att$("content","https://grecha-susha.github.io/")];if(e.length<0)return console.error("[META ERROR] Metas not found."),void e.forEach(e=>document.head.appendChild(e));e.length<t.length&&(console.error("[META ERROR] Metas don't meet standards, creating ones not found."),t.forEach(t=>{function r(e){console.error(`[META ERROR] Meta ${e.str$()} doesn't exist, creating...`),document.head.appendChild(e.get$())}e.length<1?r(t):e.forEach(e=>{t.getAttribute("name")==e.getAttribute("name")&&r(t)})})),checkForFavicon()}function checkForFavicon(){if(!document.head.querySelector('link[rel="shortcut icon"]')){console.error("[FAVICON ERROR] FAVICON not found, creating...");let e=CICOIconBuilder.drawPixelArt(`
        gg0gggggggggggggg0gg
        gg00gggggggggggg00gg
        gg000gggggggggg000gg
        gg0000gg0000gg0000gg
        yy0000000000000000yy
        yy0000y000000y0000yy
        yyy00yyy0000yyy00yyy
        yyyy00yy0yy0yy00yyyy
        rrrrrr00rrrr00rrrrrr
        brrrrr00rrrr00rrrrrb
        brrrrrr000000rrrrrrb
        bbbrrrrr0000rrrrrbbb
        `.trim().replace(/ /g,""),3);var t=CICOIconBuilder.canvasToDataURI(e),t=tag("link").att$("rel","shortcut icon").att$("type","image/x-icon").att$("href",t).get$();document.head.appendChild(t),e.remove()}}"undefined"==typeof module&&Object.assign(window,windowMethods),windowOptimizer(),document.addEventListener("DOMContentLoaded",hydrate)}}"undefined"!=typeof module?module.exports={Grecha:Grecha}:(window.__Grecha__=Grecha,window.__Susha__||(window.__Susha__=new Grecha(window)));